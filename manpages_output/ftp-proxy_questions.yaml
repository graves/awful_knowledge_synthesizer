- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\nFTP-PROXY(8)\t\t    System Manager's Manual\t\t  FTP-PROXY(8)\n\nNAME\n     ftp-proxy – Internet File Transfer Protocol proxy server\n\nSYNOPSIS\n     ftp-proxy -i [-AnrVw] [-a address] [-D debuglevel] [-g group]\n\t       [-M maxport] [-m minport] [-R address[:port]] [-S address]\n\t       [-t timeout] [-u user]\n     ftp-proxy -p [-AnrVw] [-a address] [-D debuglevel] [-g group]\n\t       [-M maxport] [-m minport] [-R address[:port]] [-S address]\n\t       [-t timeout] [-u user]\n\nDESCRIPTION\n     ftp-proxy is a proxy for the Internet File Transfer Protocol.  The proxy\n     uses pf(4) and expects to have the FTP control connection as described in\n     services(5) redirected to it via a pf(4) rdr command.  An example of how\n     to do that is further down in this document.\n\n     The options are as follows:\n\n     -A      Permit only anonymous FTP connections.  The proxy will allow\n\t     connections to log in to other sites as the user \"ftp\" or\n\t     \"anonymous\" only.\tAny attempt to log in as another user will be\n\t     blocked by the proxy."
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How would you configure ftp-proxy to allow only anonymous FTP connections and set the debug level to 3?
  manpageQuestion3: Can you provide an example of using ftp-proxy in passive mode with a specified address and port range?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\n-a address\n\t     Specify the local IP address to use in bind(2) as the source for\n\t     connections made by ftp-proxy when connecting to destination FTP\n\t     servers.  This may be necessary if the interface address of your\n\t     default route is not reachable from the destinations ftp-proxy is\n\t     attempting connections to, or this address is different from the\n\t     one connections are being NATed to.  In the usual case this means\n\t     that address should be a publicly visible IP address assigned to\n\t     one of the interfaces on the machine running ftp-proxy and should\n\t     be the same address to which you are translating traffic if you\n\t     are using the -n option.\n\n     -D debuglevel\n\t     Specify a debug level, where the proxy emits verbose debug output\n\t     into syslogd(8) at level LOG_DEBUG.  Meaningful values of\n\t     debuglevel are 0-3, where 0 is no debug output and 3 is lots of\n\t     debug output, the default being 0.\n\n     -g group\n\t     Specify the named group to drop group privileges to, after doing\n\t     pf(4) lookups which require root.\tBy default, ftp-proxy uses the\n\t     default group of the user it drops privilege to."
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How would you configure ftp-proxy to set a specific local IP address for binding when connecting to FTP servers?
  manpageQuestion3: Can you explain how to enable debug logging for the ftp-proxy tool?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\n-i      Set ftp-proxy for use with IP-Filter.\n\n     -M maxport\n\t     Specify the upper end of the port range the proxy will use for\n\t     the data connections it establishes.  The default is\n\t     IPPORT_HILASTAUTO defined in ⟨netinet/in.h⟩ as 65535.\n\n     -m minport\n\t     Specify the lower end of the port range the proxy will use for\n\t     all data connections it establishes.  The default is\n\t     IPPORT_HIFIRSTAUTO defined in ⟨netinet/in.h⟩ as 49152.\n\n     -n      Activate network address translation (NAT) mode.  In this mode,\n\t     the proxy will not attempt to proxy passive mode (PASV or EPSV)\n\t     data connections.\tIn order for this to work, the machine running\n\t     the proxy will need to be forwarding packets and doing network\n\t     address translation to allow the outbound passive connections\n\t     from the client to reach the server.  See pf.conf(5) for more\n\t     details on NAT.  The proxy only ignores passive mode data\n\t     connections when using this flag; it will still proxy PORT and\n\t     EPRT mode data connections.  Without this flag, ftp-proxy does\n\t     not require any IP forwarding or NAT beyond the rdr necessary to\n\t     capture the FTP control connection."
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How can you configure the ftp-proxy to use a specific port range for data connections?
  manpageQuestion3: What is the function of the -n flag in the ftp-proxy tool?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\n-p      Set ftp-proxy for use with pf.\n\n     -R address:[port]\n\t     Reverse proxy mode for FTP servers running behind a NAT gateway.\n\t     In this mode, no redirection is needed.  The proxy is run from\n\t     inetd(8) on the port that external clients connect to (usually\n\t     21).  Control connections and passive data connections are\n\t     forwarded to the server.\n\n     -r      Use reverse host (reverse DNS) lookups for logging and libwrap\n\t     use.  By default, the proxy does not look up hostnames for\n\t     libwrap or logging purposes.\n\n     -S address\n\t     Source address to use for data connections made by the proxy.\n\t     Useful when there are multiple addresses (aliases) available to\n\t     the proxy.  Clients may expect data connections to have the same\n\t     source address as the control connections, and reject or drop\n\t     other connections.\n\n     -t timeout\n\t     Specifies a timeout, in seconds.  The proxy will exit and close\n\t     open connections if it sees no data for the duration of the\n\t     timeout.  The default is 0, which means the proxy will not time\n\t     out."
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How would you configure the ftp-proxy to operate in reverse proxy mode for an FTP server behind a NAT gateway?
  manpageQuestion3: Can you provide an example of using the -S option with ftp-proxy to specify a source address for data connections?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\n-u user\n\t     Specify the named user to drop privilege to, after doing pf(4)\n\t     lookups which require root privilege.  By default, ftp-proxy\n\t     drops privilege to the user proxy.\n\n\t     Running as root means that the source of data connections the\n\t     proxy makes for PORT and EPRT will be the RFC mandated port 20.\n\t     When running as a non-root user, the source of the data\n\t     connections from ftp-proxy will be chosen randomly from the range\n\t     minport to maxport as described above.\n\n     -V      Be verbose.  With this option the proxy logs the control commands\n\t     sent by clients and the replies sent by the servers to\n\t     syslogd(8).\n\n     -w      Use the tcp wrapper access control library hosts_access(3),\n\t     allowing connections to be allowed or denied based on the tcp\n\t     wrapper's hosts.allow(5) and hosts.deny(5) files.\tThe proxy does\n\t     libwrap operations after determining the destination of the\n\t     captured control connection, so that tcp wrapper rules may be\n\t     written based on the destination as well as the source of FTP\n\t     connections."
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How can you configure ftp-proxy to log control commands and server replies in verbose mode?
  manpageQuestion3: What is the effect of using the -w flag with ftp-proxy?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\nftp-proxy is run from inetd(8) and requires that FTP connections are\n     redirected to it using a rdr rule.  A typical way to do this would be to\n     use either an ipnat rule such as\n\n       int_if = \"xl0\";\n       rdr $int_if 0/0 port 21 -> 127.0.0.1 port 8021 tcp\n\n     or a pf.conf(5) rule such as\n\n       int_if = \"xl0\"\n       rdr pass on $int_if proto tcp from any to any port 21 -> 127.0.0.1 port 8021\n\n     inetd(8) must then be configured to run ftp-proxy on the port from above\n     using\n\n       127.0.0.1:8021 stream tcp nowait root /usr/libexec/ftp-proxy ftp-proxy -[ip]\n\n     in inetd.conf(5).\n\n     ftp-proxy accepts the redirected control connections and forwards them to\n     the server.  The proxy replaces the address and port number that the\n     client sends through the control connection to the server with its own\n     address and proxy port, where it listens for the data connection.\tWhen\n     the server opens the data connection back to this port, the proxy\n     forwards it to the client.  If you're using IP-Filter, the ipf.conf(5)\n     rules need to let pass connections to these proxy ports (see options -u,\n     -m, and -M above) in on the external interface.  The following example\n     allows only ports 49152 to 65535 to pass in statefully:"
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How can you configure ftp-proxy to redirect FTP control connections to a local port for proxying?
  manpageQuestion3: Can you provide an example of how to set up inetd.conf to run ftp-proxy on a specific port?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\nblock in on $ext_if proto tcp all\n\t   pass  in on $ext_if inet proto tcp from any to $ext_if \\\n\t       port > 49151 keep state\n\n     If you're using pf, then the pf.conf(5) rules need to let pass\n     connections to these proxy ports (see options -u, -m, and -M above) in on\n     the external interface.  The following example allows only ports 49152 to\n     65535 to pass in statefully:\n\n\t   block in on $ext_if proto tcp all\n\t   pass  in on $ext_if inet proto tcp from any to $ext_if \\\n\t       port > 49151 keep state\n\n     Alternatively, pf.conf(5) rules can make use of the fact that by default,\n     ftp-proxy runs as user \"proxy\" to allow the backchannel connections, as\n     in the following example:\n\n\t   block in on $ext_if proto tcp all\n\t   pass  in on $ext_if inet proto tcp from any to $ext_if \\\n\t       user proxy keep state\n\n     These examples do not cover the connections from the proxy to the foreign\n     FTP server.  If one does not pass outgoing connections by default\n     additional rules are needed."
  manpageQuestion1: What is the primary purpose of the ftp-proxy tool?
  manpageQuestion2: How would you configure pf.conf to allow stateful connections to the FTP proxy ports (49152-65535) on the external interface?
  manpageQuestion3: Can you provide an example of using pf.conf rules to allow connections to the ftp-proxy tool as the user 'proxy' on the external interface?

- prompt: "You are playing the role of a college professor. Here is some text copied from the manpages of the macOS resource `ftp-proxy`.\n\n\n\nManpage text:\n\nNOTES\n     com.apple/100.InternetSharing/ftp-proxy PF anchor is required for this\n     daemon to correctly function.\n\nSEE ALSO\n     ftp(1), pf(4), hosts.allow(5), hosts.deny(5), inetd.conf(5), ipf.conf(5),\n     ipnat.conf(5), pf.conf(5), inetd(8), ipf(8), ipnat(8), pfctl(8),\n     syslogd(8)\n\nBUGS\n     Extended Passive mode (EPSV) is not supported by the proxy and will not\n     work unless the proxy is run in network address translation mode.\tWhen\n     not in network address translation mode, the proxy returns an error to\n     the client, hopefully forcing the client to revert to passive mode (PASV)\n     which is supported.  EPSV will work in network address translation mode,\n     assuming a configuration setup which allows the EPSV connections through\n     to their destinations.\n\n     IPv6 is not yet supported.\n\nmacOS 15.3\t\t\tMarch 16, 2011\t\t\t    macOS 15.3"
  manpageQuestion1: What is the primary purpose of the ftp-proxy resource on macOS?
  manpageQuestion2: What configuration is required for the ftp-proxy daemon to function correctly on macOS?
  manpageQuestion3: Under what conditions does the ftp-proxy resource support Extended Passive mode (EPSV)?

